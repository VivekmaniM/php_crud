<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/notify/0.4.2/notify.js"></script>

<link rel="stylesheet" type="text/css"  href="css/fonts/font-awesome.min.css">
<link rel="stylesheet" type="text/css"  href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css"  href="css/main.css">
<link rel="stylesheet" type="text/css"  href="css/util.css">
<link rel="stylesheet" type="text/css"  href="css/style.css">
</head>
<body style="background: url(images/1_bg.jpeg) no-repeat center center fixed;">
	<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center m-t-70 hide'>
		<img src='images/logos/app_logo.png' class='app-logo'></img>
	</div>
	<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 m-t-70'>
		<div class='border' id='login_card'>
			<div class="p-20">
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
						<span class="index-title">Log In</span>
						<hr class="m-t-3">
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-t-10 m-b-10">
						<div class="input-group">
						    <span class="input-group-addon login-group-addon"><i class="fa fa-user"></i></span>
						    <input type="text" class="form-control" id="index_username" placeholder="Username(E-Mail ID) *">
						</div>	
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-t-10 m-b-10">
						<div class="input-group">
						    <span class="input-group-addon login-group-addon"><i class="fa fa-key f-s-11"></i></span>
						    <input type="password" class="form-control pwd-input" id="index_password" placeholder="Password *">
						    <span class="input-group-addon bg-white"><i class="fa fa-eye pwd-icon cursor-pointer" id="pwdShowHideIcon" onclick="ShowHidePassword('index_password', 'pwdShowHideIcon');"></i></span>
						</div>
					</div>
				</div>
				<div class="row">
					<!-- <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-t-10">
						<span class=''><button class="btn btn-info btn-sm btn-block login-btn" id="btn_login"><span class='m-r-5'><i class='fa fa-sign-in'></i></span>Log In</button></span>
					</div> -->
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-t-10">
						<span class=''><button class="btn btn-info btn-sm btn-block login-btn" style="height: 37px;border-radius: 50px; background-color:#00b0e4; color: #fff; border-color:#00b0e4;" id="btn_login"><span class='m-r-5'><i class='fa fa-sign-in'></i></span>Log In</button></span>
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-t-10">
						<span class="m-l-10"><a class="cursor-pointer" id="forget_pwd_link"><u>Forget Password?</u></a></span>
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
						<div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 m-t-10">
							<span class=''><hr></span>
						</div>
						<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 m-t-10 text-center">
							<span class=''>or</span>
						</div>
						<div class="col-lg-5 col-md-5 col-sm-5 col-xs-5 m-t-10">
							<span class=''><hr></span>
						</div>
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-t-10">
						<span class=''><button class="btn btn-info btn-sm btn-block login-btn" style="height: 37px;border-radius: 50px; background-color:#58D68D; color: #fff; border-color:#58D68D;" id="register_link"><span class='m-r-5'><i class='fa fa-sign-in'></i></span>Create an account</button></span>
					</div>
				</div>
				<div class="row m-t-10 hide">
					<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 m-t-10">
						<span class=''><button class="btn btn-default btn-xs btn-block index-btn-default" id="register_link">Create an account</button></span>
					</div>
					<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 m-t-10">
						<span class=''><button class="btn btn-default btn-xs btn-block index-btn-default" id="forgot_pwd_link">Forgot password?</button></span>
					</div>
				</div>
			</div>
		</div>
		<div class='border hide' id='register_card'>
			<div class="p-20">
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
						<span class="index-title">Registration</span>
						<hr class="m-t-3">
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-t-10 m-b-10">
						<div class="input-group">
						    <span class="input-group-addon login-group-addon"><i class="fa fa-envelope-o f-s-9"></i></span>
						    <input type="text" class="form-control" id="register_username" placeholder="Username(E-Mail ID) *">
						</div>
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-10">
						<div class="input-group">
						    <span class="input-group-addon login-group-addon"><i class="fa fa-user"></i></span>
						    <input type="text" class="form-control" id="register_firstname" placeholder="First Name *">
						</div>
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-10">
						<div class="input-group">
						    <span class="input-group-addon login-group-addon"><i class="fa fa-user"></i></span>
						    <input type="text" class="form-control" id="register_lastname" placeholder="Last Name *">
						</div>
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-10">
						<div class="input-group">
						    <span class="input-group-addon login-group-addon"><i class="fa fa-key f-s-11"></i></span>
						    <input type="password" class="form-control pwd-input" id="register_password" placeholder="Password *">
						    <span class="input-group-addon bg-white"><i class="fa fa-eye pwd-icon cursor-pointer" id="reg_pwdShowHideIcon" onclick="ShowHidePassword('register_password', 'reg_pwdShowHideIcon');"></i></span>
						</div>
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-b-10">
						<div class="input-group">
						    <span class="input-group-addon login-group-addon"><i class="fa fa-key f-s-11"></i></span>
						    <input type="password" class="form-control pwd-input" id="register_confirm_password" placeholder="Confirm Password *">
						    <span class="input-group-addon bg-white"><i class="fa fa-eye pwd-icon cursor-pointer" id="reg_confirm_pwdShowHideIcon" onclick="ShowHidePassword('register_confirm_password', 'reg_confirm_pwdShowHideIcon');"></i></span>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-t-10">
						<span class=''><button class="btn btn-info btn-sm btn-block login-btn" style="height: 37px;border-radius: 50px; background-color:#58D68D; color: #fff; border-color:#58D68D;" id="btn_register"><span class='m-r-5'><i class='fa fa-save'></i></span>Register</button></span>
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-t-10">
						<span class='m-l-10'><a class="cursor-pointer" id="login_link"><< Back</a></span>
					</div>
				<!-- <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 m-t-10">
						<span class=''><button class="btn btn-default btn-sm btn-block" id="login_link"><span class='m-r-5'><i class='fa fa-sign-in'></i></span>Log In</button></span>
					</div>		
					<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 m-t-10">
						<span class=''><button class="btn btn-info btn-sm btn-block" id="btn_register"><span class='m-r-5'><i class='fa fa-sign-in'></i></span>Register</button></span>
					</div> -->
				</div>
			</div>
		</div>
		<div class='border hide' id='forgot_pwd_card'>
			<div class="p-20">
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
						<span class="index-title">Forgot Password?</span>
						<hr class="m-t-3">
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-t-10 m-b-10">
						<input type="text" class="form-control w-100" id="forgot_pwd_mail_id" placeholder="Enter your E-Mail ID *">
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-t-10">
						<span class=''><button class="btn btn-info btn-sm btn-block login-btn" style="height: 37px;border-radius: 50px; background-color:#00b0e4; color: #fff; border-color:#00b0e4;" id="btn_send_current_pwd"><span class='m-r-5'><i class='fa fa-paper-plane'></i></span>Send Password</button></span>
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 m-t-10">
						<span class='m-l-10'><a class="cursor-pointer" id="forget_pwd_login_link"><< Back</a></span>
					</div>
					<!-- <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 m-t-10">
						<span class=''><button class="btn btn-default btn-xs btn-block index-btn-default" id="fotgot_pwd_register_link">Create an account</button></span>
					</div>
					<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 m-t-10">
						<span class=''><button class="btn btn-default btn-xs btn-block index-btn-default" id="forget_pwd_login_link">Log In</button></span>
					</div> -->
				</div>
			</div>
		</div>
	</div>
	
	
	<div class="notif-box-warning" id="index_warning_notif"></div>
	<div class="notif-box-success" id="index_success_notif"></div>
	
	
	<script type="text/javascript" src="js/jquery/jquery.md5.js"></script>
	<script type="text/javascript" src="js/services.js"></script>
	<script type="text/javascript" src="php/insert_user.php"></script>
	<script type="text/javascript" src="js/main.js"></script>
	<script type="text/javascript" src="js/functions.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			if(GetLS('userName') != null)
				$('#index_username').val(GetLS('userName'));
			
			$('#btn_login').click(function(){
				isValid = true;
				
				if($('#index_username').val() == ''){
					WarningNotif('index_warning_notif', 'Enter username');
					isValid = false;
				}
				else if($('#index_password').val() == ''){
					WarningNotif('index_warning_notif', 'Enter password'); 
					isValid = false;
				}
				
				if(isValid){
					$('#btn_login').button('loading');
					GetUserData($.trim($('#index_username').val()), 'login', function(userData){
						if(userData.length == 1){
							if(userData[0].password == $.md5($.trim($('#index_password').val()))){
								SetLS('userName', userData[0].username);
								window.location = 'home.html';
							}
							else
								WarningNotif('index_warning_notif', 'Invalid attempt. Try again');
							
							$('#btn_login').button('reset');
						}
						else if(userData.length == 0){
							$('#btn_login').button('reset');
							WarningNotif('index_warning_notif', 'User profile not found');
						}
						else{
							$('#btn_login').button('reset');
							WarningNotif('index_warning_notif', 'Check your network connection');
						}
					});
					
					<!-- if($('#index_username').val() == 'Mani' && $('#index_password').val() == 'Mani') -->
						<!-- window.location = 'home.html'; -->
					<!-- else	 -->
						<!-- WarningNotif('index_warning_notif', 'Invalid attempt. Try again'); -->
				}	
			});
			
			$('#btn_register').click(function(){
				isValid = true;
				
				if($.trim($('#register_username').val()) == ''){
					WarningNotif('index_warning_notif', 'Enter username');
					isValid = false;
				}
				else if(!(IsEmail($.trim($('#register_username').val())))){
					WarningNotif('index_warning_notif', 'Enter valid mail id'); 
					isValid = false;
				}
				else if($.trim($('#register_firstname').val()) == ''){
					WarningNotif('index_warning_notif', 'Enter first name'); 
					isValid = false;
				}
				else if($.trim($('#register_password').val()) == ''){
					WarningNotif('index_warning_notif', 'Enter password'); 
					isValid = false;
				}
				else if($.trim($('#register_confirm_password').val()) == ''){
					WarningNotif('index_warning_notif', 'Enter confirm password'); 
					isValid = false;
				}
				else if($.trim($('#register_password').val()) != $.trim($('#register_confirm_password').val())){
					WarningNotif('index_warning_notif', 'Password does not mached'); 
					isValid = false;
				}
				
				if(isValid){
					$('#btn_register').button('loading');
					var lastName = null;
					
					if($.trim($('#register_lastname').val()) != '')
						lastName = $.trim($('#register_lastname').val());
						
					GetUserData(GetLS('userName'), 'profile', function(userData){
						if(userData.length == 0){
							RegisterUser($.trim($('#register_username').val()), $.trim($('#register_firstname').val()), lastName, $.md5($.trim($('#register_confirm_password').val())), function(response){
								if(response == true){
									$('#register_username, #register_firstname, #register_lastname, #register_password, #register_confirm_password').val('');
									$('#register_card').addClass('hide');
									$('#index_username, #index_password').val('');
									$('#login_card').removeClass('hide');
									$('#btn_register').button('reset');
									SuccessNotif('index_success_notif', 'Registered successfully');
								}
								else{
									WarningNotif('index_warning_notif', 'Registration failed');
									$('#btn_register').button('reset');
								}
							});
						}
						else{
							WarningNotif('index_warning_notif', 'User already registered. Please log in');
							$('#btn_register').button('reset');
						}
					});
				}	
			});
			
			$('#register_link, #fotgot_pwd_register_link').click(function(){
				BackToRegistrationCard();
			});
			
			$('#login_link, #forget_pwd_login_link').click(function(){
				BackToLoginCard();
			});
			
			$('#forget_pwd_link').click(function(){
				$('#login_card, #register_card').addClass('hide');
				$('#forgot_pwd_mail_id').val('');
				$('#forgot_pwd_card').removeClass('hide');
			});
			
			$('#btn_send_current_pwd').click(function(){
				$('#btn_send_current_pwd').button('loading');
				console.log('Password---', GeneratePassword());
				SendPasswordViaEmail('vivek.mani.kalai@gmail.com', 'mailtovivekmani@gmail.com', GeneratePassword(), function(response){
					console.log('Response---', response);
					$('#btn_send_current_pwd').button('reset');
				});
			});
		});
		
		function BackToLoginCard(){
			$('#register_card, #forgot_pwd_card').addClass('hide');
			$('#index_password').val('');
			$('#login_card').removeClass('hide');
		}
		
		function BackToRegistrationCard(){
			$('#login_card, #forgot_pwd_card').addClass('hide');
			$('#register_username, #register_firstname, #register_lastname, #register_password, #register_confirm_password').val('');
			$('#register_card').removeClass('hide');
		}
		
		function GeneratePassword() {
			var length = 8, charset = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789", retVal = "";
			
			for (var i = 0, n = charset.length; i < length; ++i) {
				retVal += charset.charAt(Math.floor(Math.random() * n));
			}
			return retVal;
		}
	</script>
	</body>
</html>